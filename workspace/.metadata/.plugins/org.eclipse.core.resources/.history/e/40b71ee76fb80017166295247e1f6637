package com.acj.sock;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;

public class Client {

	public static void main(String[] args) {
		System.out.println("[Client] 程序开始");
		
		 try {
	            // 创建一个流套接字并将其连接到指定 IP 地址的指定端口号
			 	System.out.println("[Client] 请求连接");
	            Socket socket = new Socket("127.0.0.1", 2017);
	            System.out.println("[Client] 连接成功,请输入文字");

	            PrintWriter printWriter = new PrintWriter(socket.getOutputStream(), true);
	            BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
	            
	            String result = "";
	            while(result.indexOf("bye") == -1){
	                BufferedReader sysBuff = new BufferedReader(new InputStreamReader(System.in));
	                printWriter.println(sysBuff.readLine());
	                printWriter.flush();
	                
	                result = bufferedReader.readLine();
	                System.out.println("Server say : " + result);
	            }

	            printWriter.close();
	            bufferedReader.close();
	            socket.close();
	        } catch (Exception e) {
	            System.out.println("Exception:" + e);
	        }
		 System.out.println("[Client] 程序结束");
		
	}

}
